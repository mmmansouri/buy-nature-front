<div class="items-container">
  <!-- Modern Header -->
  <div class="page-header">
    <div class="header-content">
      <mat-icon class="header-icon">storefront</mat-icon>
      <div>
        <h1>Shop Our Products</h1>
        <p class="subtitle">Discover nature's finest organic products</p>
      </div>
    </div>
    <div class="header-stats" *ngIf="!isLoading && items.length > 0">
      <mat-chip>{{ items.length }} {{ items.length === 1 ? 'Product' : 'Products' }}</mat-chip>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading products...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-container">
    <mat-icon class="error-icon">error_outline</mat-icon>
    <h2>Oops! Something went wrong</h2>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="loadItems()">
      <mat-icon>refresh</mat-icon>
      Try Again
    </button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !error && items.length === 0" class="empty-container">
    <mat-icon class="empty-icon">shopping_cart</mat-icon>
    <h2>No Products Available</h2>
    <p>Check back soon for new arrivals!</p>
  </div>

  <!-- Items Grid -->
  <div *ngIf="!isLoading && !error && items.length > 0" class="items-grid">
    <mat-card *ngFor="let item of items" class="item-card">
      <!-- Product Image - clickable to go to details -->
      <div class="image-container" (click)="navigateToDetails(item.id)" style="cursor: pointer;">
        <img
          *ngIf="item.imageUrl"
          [src]="item.imageUrl"
          [alt]="item.name"
          loading="lazy"
          class="product-image">
        <div *ngIf="!item.imageUrl" class="image-placeholder">
          <mat-icon>image</mat-icon>
        </div>

        <!-- Quick Add Button Overlay -->
        <div class="quick-add-overlay">
          <button
            mat-mini-fab
            color="primary"
            (click)="addItem(item, $event)"
            class="quick-add-btn"
            aria-label="Add to cart">
            <mat-icon>add_shopping_cart</mat-icon>
          </button>
        </div>
      </div>

      <!-- Product Info -->
      <mat-card-content class="product-content">
        <div class="product-header">
          <h3 class="product-name" [routerLink]="['/item-details', item.id]" style="cursor: pointer;">{{ item.name }}</h3>
          <div class="price-tag">
            <span class="price">{{ formatPrice(item.price) }}</span>
          </div>
        </div>

        <p class="product-description">{{ item.description }}</p>

        <!-- Product Actions -->
        <div class="product-actions">
          <button
            mat-raised-button
            color="primary"
            (click)="addItem(item, $event)"
            class="add-to-cart-btn">
            <mat-icon>shopping_cart</mat-icon>
            Add to Cart
          </button>
          <button
            mat-stroked-button
            color="primary"
            [routerLink]="['/item-details', item.id]"
            class="details-btn">
            <mat-icon>visibility</mat-icon>
            Details
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
