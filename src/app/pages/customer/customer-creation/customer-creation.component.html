<h2>Create New Customer</h2>

<mat-stepper linear>
  <!-- User Creation Step -->
  <mat-step [stepControl]="userForm">
    <ng-template matStepLabel>Create User Account</ng-template>

    <form [formGroup]="userForm">
      <div class="form-container">
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" placeholder="Enter email" required>
          <mat-error *ngIf="userForm.get('email')?.hasError('required')">
            Email is required
          </mat-error>
          <mat-error *ngIf="userForm.get('email')?.hasError('email')">
            Please enter a valid email address
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <input matInput type="password" formControlName="password" placeholder="Enter password" required>
          <mat-error>
            {{getPasswordErrorMessage()}}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="error-container" *ngIf="error()">
        <p class="error-message">{{error()}}</p>
      </div>

      <div class="button-container">
        <button
          mat-raised-button
          color="primary"
          (click)="submitUserForm()"
          [disabled]="isLoading()">
          {{isLoading() ? 'Creating...' : 'Create User Account'}}
        </button>
      </div>
    </form>
  </mat-step>

  <!-- Additional steps will go here -->
  <mat-step>
    <ng-template matStepLabel>Customer Details</ng-template>
    <!-- Second step content will go here -->
    <p>Customer details form will be here</p>
  </mat-step>

  <mat-step>
    <ng-template matStepLabel>Review & Submit</ng-template>
    <!-- Third step content will go here -->
    <p>Review customer information</p>
  </mat-step>
</mat-stepper>
