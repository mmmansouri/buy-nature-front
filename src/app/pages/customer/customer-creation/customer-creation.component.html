<div class="customer-creation-container">
  <!-- Decorative Background Elements -->
  <div class="background-decoration">
    <div class="leaf leaf-1">
      <mat-icon>spa</mat-icon>
    </div>
    <div class="leaf leaf-2">
      <mat-icon>eco</mat-icon>
    </div>
    <div class="leaf leaf-3">
      <mat-icon>local_florist</mat-icon>
    </div>
    <div class="leaf leaf-4">
      <mat-icon>nature</mat-icon>
    </div>
  </div>

  <mat-card class="creation-card">
    <!-- Card Header with Bio Theme -->
    <div class="card-header">
      <div class="header-icon">
        <mat-icon>person_add</mat-icon>
      </div>
      <h1 class="header-title">Join Our Community</h1>
      <p class="header-subtitle">Create your account and start your natural journey with us</p>
    </div>

    <mat-card-content>
      <!-- Success Message -->
      @if (successMessage()) {
        <div class="success-banner">
          <mat-icon>check_circle</mat-icon>
          <div class="success-content">
            <strong>Success!</strong>
            <span>{{ successMessage() }}</span>
          </div>
        </div>
      }

      <!-- Error Message -->
      @if (error()) {
        <div class="error-banner">
          <mat-icon>error_outline</mat-icon>
          <span>{{ error() }}</span>
        </div>
      }

      <form [formGroup]="customerForm" (ngSubmit)="onSubmit()">
        <!-- Account Credentials Section -->
        <div class="form-section">
          <h3 class="section-title">
            <mat-icon>account_circle</mat-icon>
            Account Credentials
          </h3>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email Address</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              placeholder="your.email@example.com"
              autocomplete="email"
              required>
            <mat-icon matPrefix>email</mat-icon>
            <mat-error>{{ getEmailErrorMessage() }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input
              matInput
              [type]="hidePassword() ? 'password' : 'text'"
              formControlName="password"
              placeholder="Enter a strong password"
              autocomplete="new-password"
              required>
            <mat-icon matPrefix>lock</mat-icon>
            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="'Toggle password visibility'"
              [attr.aria-pressed]="!hidePassword()">
              <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error>{{ getPasswordErrorMessage() }}</mat-error>
            <mat-hint>At least 8 chars with uppercase, lowercase, number, and special character</mat-hint>
          </mat-form-field>
        </div>

        <!-- Personal Information Section -->
        <div class="form-section">
          <h3 class="section-title">
            <mat-icon>person</mat-icon>
            Personal Information
          </h3>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>First Name</mat-label>
              <input matInput formControlName="firstName" placeholder="John" required>
              <mat-error>First name is required</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Last Name</mat-label>
              <input matInput formControlName="lastName" placeholder="Doe" required>
              <mat-error>Last name is required</mat-error>
            </mat-form-field>
          </div>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Phone Number</mat-label>
            <input matInput type="tel" formControlName="phoneNumber" placeholder="+1 (555) 123-4567" required>
            <mat-icon matPrefix>phone</mat-icon>
            <mat-error>Phone number is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Address Section -->
        <div class="form-section">
          <h3 class="section-title">
            <mat-icon>home</mat-icon>
            Address
          </h3>

          <div class="form-row">
            <mat-form-field appearance="outline" class="street-number">
              <mat-label>Street Number</mat-label>
              <input matInput formControlName="streetNumber" placeholder="123" required>
              <mat-error>Required</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="street">
              <mat-label>Street</mat-label>
              <input matInput formControlName="street" placeholder="Main Street" required>
              <mat-error>Street is required</mat-error>
            </mat-form-field>
          </div>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>City</mat-label>
            <input matInput formControlName="city" placeholder="New York" required>
            <mat-error>City is required</mat-error>
          </mat-form-field>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Region/State</mat-label>
              <input matInput formControlName="region" placeholder="NY" required>
              <mat-error>Region is required</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Postal Code</mat-label>
              <input matInput formControlName="postalCode" placeholder="10001" required>
              <mat-error>Postal code is required</mat-error>
            </mat-form-field>
          </div>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country" placeholder="United States" required>
            <mat-error>Country is required</mat-error>
          </mat-form-field>
        </div>

        <!-- Submit Button -->
        <div class="button-container">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="submit-button"
            [disabled]="loading() || !!successMessage()">
            @if (loading()) {
              <mat-spinner diameter="20" class="button-spinner"></mat-spinner>
              <span>Creating Account...</span>
            } @else {
              <ng-container>
                <mat-icon>person_add</mat-icon>
                <span>Create Account</span>
              </ng-container>
            }
          </button>
        </div>
      </form>
    </mat-card-content>

    <!-- Card Footer -->
    <mat-card-footer class="card-footer">
      <mat-icon>login</mat-icon>
      <p>Already have an account? <a routerLink="/login" class="login-link">Sign in here</a></p>
    </mat-card-footer>
  </mat-card>
</div>