<mat-toolbar class="modern-toolbar" color="primary">
  <div class="toolbar-content">
    <!-- Left Section: Menu & Logo -->
    <div class="left-section">
      <button mat-icon-button (click)="toggleMenu()" class="menu-button" aria-label="Toggle menu">
        <mat-icon>menu</mat-icon>
      </button>
      <a routerLink="/" class="logo-link">
        <div class="logo-icon-wrapper">
          <mat-icon class="logo-icon">eco</mat-icon>
        </div>
        <div class="logo-content">
          <span class="logo-text">Buy Nature</span>
          <span class="logo-subtitle">Natural & Organic</span>
        </div>
      </a>
    </div>

    <!-- Right Section: Actions -->
    <div class="right-section">
      <!-- Cart Button with Notification -->
      <div class="cart-button-container">
        <button
          mat-icon-button
          (click)="toggleCartShow($event)"
          class="cart-button"
          aria-label="Shopping cart">
          <mat-icon
            [matBadge]="(totalItems$ | async) || 0"
            [matBadgeHidden]="!(totalItems$ | async)"
            matBadgeColor="warn"
            matBadgeSize="small">
            shopping_cart
          </mat-icon>
        </button>

        <!-- Cart Notification -->
        @if (currentNotification()) {
          <div class="cart-notification" [@slideDown]>
            <div class="item-image">
              @if (currentNotification()!.itemImage) {
                <img [src]="currentNotification()!.itemImage" [alt]="currentNotification()!.itemName" />
              } @else {
                <div class="image-placeholder">
                  <mat-icon>shopping_bag</mat-icon>
                </div>
              }
            </div>
            <div class="item-info">
              <div class="success-icon">
                <mat-icon>check_circle</mat-icon>
              </div>
              <div class="item-details">
                <strong class="item-name">{{ currentNotification()!.itemName }}</strong>
                <div class="item-meta">
                  <span class="quantity">Qty: {{ currentNotification()!.quantity }}</span>
                  <span class="separator">â€¢</span>
                  <span class="price">{{ currentNotification()!.itemPrice | currency }}</span>
                </div>
                <p class="success-message">Added to cart successfully!</p>
              </div>
            </div>
            <button mat-icon-button class="close-button" (click)="closeNotification()">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        }
      </div>

      <!-- User Menu Button -->
      <button
        mat-icon-button
        (click)="toggleUserMenu($event)"
        class="user-button"
        aria-label="User menu">
        <mat-icon>account_circle</mat-icon>
      </button>
    </div>
  </div>
</mat-toolbar>

<!-- Mini Cart Container -->
<ng-container #miniCartContainer></ng-container>

<!-- User Menu Container -->
<ng-container #userMenuContainer></ng-container>
